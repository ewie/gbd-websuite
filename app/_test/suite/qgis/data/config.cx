server.mapproxy.enabled true
server.qgis.enabled true
server.spool.enabled false

access+ { role "all" type "allow" }

api.actions+ { type "map" }
api.actions+ { type "search" }
api.actions+ { type "asset" }
api.actions+ { type "project" }

## the structure of the qgis project is as follows
##
##    GroupOne
##        GroupOneOne
##            points_ghana_25832
##    GroupTwo
##        squares_memphis_25832
##        GroupTwoOne
##            squares_ny_2263
##            GroupTwoOneOne
##                squares_dus1_3857
##                squares_dus2_3857


projects+ {
    uid "a"

    map.crs "EPSG:3857"

    map.layers+ {
        title "qgis_flat_ghana"
        type "qgisflat"
        path "/common/qgis/test_geojson_postgres.qgs"
        sourceLayers.names ["points_ghana_25832"]
    }
    map.layers+ {
        title "qgis_flat_dus"
        type "qgisflat"
        path "/common/qgis/test_geojson_postgres.qgs"
        sourceLayers.names ["squares_dus1_3857", "squares_dus2_3857"]
    }

    @include /common/client.cx
}

projects+ {
    uid "tree_full"

    map.crs "EPSG:3857"

    map.layers+ {
        title "t"
        type "qgis"
        path "/common/qgis/test_geojson_postgres.qgs"
    }

    @include /common/client.cx
}

projects+ {
    uid "tree_filtered"

    map.crs "EPSG:3857"

    map.layers+ {
        title "t"
        type "qgis"
        rootLayers.names [ "GroupOne", "GroupTwoOneOne"]
        path "/common/qgis/test_geojson_postgres.qgs"
    }

    @include /common/client.cx
}

projects+ {
    uid "tree_exclude"

    map.crs "EPSG:3857"

    map.layers+ {
        title "t"
        type "qgis"
        excludeLayers.names ["points_ghana_25832", "squares_dus1_3857"]
        path "/common/qgis/test_geojson_postgres.qgs"
    }

    @include /common/client.cx
}

projects+ {
    uid "tree_flattened"

    map.crs "EPSG:3857"

    map.layers+ {
        title "t"
        type "qgis"
        flatten.level 2
        path "/common/qgis/test_geojson_postgres.qgs"
    }

    @include /common/client.cx
}
